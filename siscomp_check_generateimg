import sqlite3
import base64

con = sqlite3.connect('testedb.db')
c = con.cursor()

query = c.execute('SELECT * FROM imagensdb')
data = c.fetchall()
for row in data:
    print(row[1])
    
term = '%'+'imagem0'+'%'
query1 = c.execute('SELECT picturepath FROM imagensdb WHERE picturepath LIKE ?', (term,))
data1 = query1.fetchone()

testpath = '/home/telespazio/√Årea de Trabalho/imgs_socket/testimg.jpeg'

for row in data1:
    print(row)
    lopath =row
    print(lopath)
    
with open(testpath, 'rb') as input_file:
    photostr = base64.b64encode(input_file.read())
    print('photostr len =', len(photostr))
    
with open('imgteste.jpeg', 'wb') as image_result:
    image_result.write(base64.decodebytes(photostr))
    print('done')
